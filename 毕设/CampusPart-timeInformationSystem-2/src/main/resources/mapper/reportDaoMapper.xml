<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.xzf.springboot.dao.ReportDao">


    <select id="queryReportList" resultType="com.xzf.springboot.pojo.Report">
        select * from report
    </select>

    <select id="queryReportById" resultType="com.xzf.springboot.pojo.Report">
        select * from report where rid=#{rid}
    </select>


    <delete id="deleteReport" parameterType="int" >
        delete from report where rid=#{rid}
    </delete>


    <update id="updateReport" parameterType="com.xzf.springboot.pojo.Report">
        update report set result=#{result},state=#{state} where rid=#{rid}
    </update>

    <!--    搜索-->
    <select id="searchReport" resultType="com.xzf.springboot.pojo.Report">
        select * from report
        <where>
            <if test="startTime != null and startTime != ''">
                AND time <![CDATA[ >= ]]> #{startTime}
            </if>
            <if test="endTime != null and endTime != ''">
                AND time <![CDATA[ <= ]]> #{endTime}
            </if>
            <if test="stats != null and stats != ''">
                AND state like '%${stats}%'
            </if>
        </where>
    </select>

    <insert id="addReport" parameterType="com.xzf.springboot.pojo.Report">
        insert into report (reporterName,reportOrdersId,reason,time,state) values(#{reporterName},#{reportOrdersId},#{reason},#{time},#{state})
    </insert>

</mapper>
